/* Consolidated application CSS
   Combines small inline styles and page-specific styles into a single file.
*/

/* Navbar and brand */
.navbar-brand {
    font-weight: bold;
}

/* Active section indicator in navbar */
.active-section-indicator {
    display: flex;
    align-items: center;
    padding: 8px 20px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    color: white;
    font-weight: 500;
    font-size: 1.1rem;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.active-section-indicator:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.active-section-indicator i {
    font-size: 1.2rem;
    color: #667eea;
    filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.8));
}

/* Card headers gradient used across app */
.card-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

/* Positive / negative helpers */
.positive { color: #28a745; }
.negative { color: #dc3545; }

/* Month card hover */
.month-card { transition: transform 0.2s; }
.month-card:hover { transform: translateY(-2px); }

/* Remove text selection and focus outline when clicking month cards in the dashboard */
.month-card, .month-card * {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Remove browser focus outline for anchor-wrapped month cards for mouse interaction.
   Keep :focus-visible for keyboard users to preserve accessibility. */
a.text-decoration-none:focus,
a.text-decoration-none:active {
    outline: none !important;
    box-shadow: none !important;
}

.month-card:focus,
.month-card:active {
    outline: none !important;
    box-shadow: none !important;
}

/* Current month highlight */
.current-month {
    /* No special selection styling for the current month: make it visually identical to other cards */
    box-shadow: none !important;
    border: none !important;
}

/* Footer */
.footer {
    background-color: #f8f9fa;
    padding: 20px 0;
    margin-top: 50px;
}

/* Tipo filter styles consolidated */

/* PayPal/PostePay toggle styles (merged from static/css/ppay.css) */
#toggle-completati,
#toggle-movimenti {
    background: transparent !important;
    color: inherit !important;
    border: none !important;
    box-shadow: none !important;
    width: 32px !important;
    height: 32px !important;
    padding: 0 !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}
#toggle-completati i,
#toggle-icon-movimenti i,
#toggle-icon i {
    width: 32px !important;
    height: 32px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 20px !important;
    line-height: 1 !important;
    color: inherit !important;
}
/* Forza icone bianche quando presenti su sfondi scuri */
.bg-dark #toggle-completati i,
.bg-dark #toggle-movimenti i,
.btn-dark #toggle-completati i,
.btn-dark #toggle-movimenti i {
    color: #fff !important;
}
/* Hover e transizioni */
#toggle-completati,
#toggle-movimenti {
    transition: background-color 0.12s ease, transform 0.12s ease;
}
#toggle-completati:hover,
#toggle-movimenti:hover {
    background-color: rgba(255,255,255,0.06);
    transform: translateY(-1px);
}
#toggle-completati i,
#toggle-movimenti i {
    transition: transform 0.12s ease, color 0.12s ease;
}
#toggle-completati:hover i,
#toggle-movimenti:hover i {
    transform: scale(1.06);
}

/* Small helper for progress bars */
.progress { height: 20px; }
.progress .progress-bar { line-height: 20px; }

/* Ensure table header labels are horizontally aligned */


/* Tipo filter alignment helpers (not used) */

/* Make action buttons in tables uniformly rounded and spaced */
.table .btn,
.table .btn-sm,
.table .btn-group .btn {
    border-radius: 6px !important; /* consistent rounded corners */
    height: 32px !important;
    min-width: 32px !important;
    padding: 4px 8px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 14px !important;
    box-sizing: border-box !important;
}

/* Slightly reduce size of small action buttons (modify/delete) inside btn-group-sm
   to visually match the compact inline editor buttons. */
.table .btn-group.btn-group-sm .btn {
    height: 26px !important;
    padding: 2px 6px !important;
    min-width: 28px !important;
    font-size: 13px !important;
}
.table .btn-group.btn-group-sm .btn i { font-size: 13px; line-height: 1 !important; }
/* Ensure icon inside button doesn't add extra offset */
.table .btn i,
.table .btn-sm i,
.table .btn-group .btn i { margin: 0 !important; line-height: 1 !important; }
/* Ensure uniform gap between buttons in action groups (gap + fallback) */
.table .btn-group { display: inline-flex; gap: 8px; }

/* Center all table header labels by default */
.table thead th { text-align: center; vertical-align: middle; }

/* Ensure tables inside cards align visually with the card header
   This fixes small horizontal shifts where a table could appear
   slightly indented compared to the header (see Garage -> Manutenzioni).
   These are conservative rules that keep default Bootstrap spacing
   but make sure the table edge aligns with the card body padding. */
.card > .card-body > .table-responsive {
    padding-left: 1rem;
    padding-right: 1rem;
}
.card > .card-body > .table-responsive .table {
    margin-bottom: 0; /* avoid extra gap below table */
    width: 100%;
    table-layout: auto;
}
/* normalize horizontal padding for table cells so columns line up */
.table thead th, .table tbody td {
    padding-left: .75rem !important;
    padding-right: .75rem !important;
}

/* Hide native number input spin buttons for elements that should not show them
   Use the class .no-spinner on the input to target budget numeric inputs only. */
.no-spinner::-webkit-outer-spin-button,
.no-spinner::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
.no-spinner {
    appearance: textfield;
    -webkit-appearance: none;
    -moz-appearance: textfield; /* Firefox */
}

/* Inline editor alignment helpers: ensure consistent horizontal gap and heights
   between the input and the confirm/cancel buttons for inline editors. */
.inline-edit-form, .inline-budget-edit {
    display: inline-flex;
    align-items: center;
    gap: 8px; /* horizontal spacing between input and buttons */
    flex-wrap: nowrap; /* avoid buttons wrapping under the input */
    white-space: nowrap; /* keep items on a single line */
}
.inline-edit-form input[type="number"],
.inline-budget-edit input[type="number"],
.inline-edit-form input[type="text"] {
    height: 28px; /* slightly smaller to match reduced button size */
    padding: .25rem .4rem;
    box-sizing: border-box;
    margin: 0; /* remove any vertical margins */
    vertical-align: middle;
    line-height: 1;
}
.inline-edit-form .btn, .inline-budget-edit .btn {
    height: 28px !important;
    padding: 2px 6px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin-top: 0 !important;
    line-height: 1 !important;
}
/* Extra tightening to avoid subtle icon/button misalignment across browsers */
.inline-edit-form input, .inline-budget-edit input {
    display: inline-block;
    vertical-align: middle;
}
.inline-edit-form .btn, .inline-budget-edit .btn {
    min-width: 30px !important;
    box-sizing: border-box !important;
    font-size: 13px !important;
}
.inline-edit-form .btn i, .inline-budget-edit .btn i {
    font-size: 14px;
    line-height: 1 !important;
    display: inline-block;
    vertical-align: middle;
}
.inline-edit-form { -webkit-font-smoothing: antialiased; }

/* Fix striping for ricorrenti table.
   JS will add .row-odd or .row-even classes to visible rows. */
#table-ricorrenti tbody tr.row-odd {
    --bs-table-accent-bg: var(--bs-table-striped-bg);
    background-color: var(--bs-table-striped-bg, rgba(0,0,0,0.05));
}

/* Disable visual highlight when clicking buttons inside vehicle cards
   Keep keyboard focus-visible for accessibility (use :focus:not(:focus-visible) to suppress
   mouse-driven outlines while preserving keyboard navigation cues). */
.card .btn:focus:not(:focus-visible),
.card .btn:active,
.card .btn.active {
    outline: none !important;
    box-shadow: none !important;
}

/* Also remove focus ring for the small icon toggle buttons used in the garage header */
#toggle-bolli:focus:not(:focus-visible),
#toggle-assicurazioni:focus:not(:focus-visible),
#toggle-manutenzioni:focus:not(:focus-visible) {
    outline: none !important;
    box-shadow: none !important;
}

/* Inline label sizing for garage inline forms (manutenzione, bollo, assicurazione) */
.inline-add-box .inline-label {
    flex: 0 0 6.25rem; /* ~100px */
    max-width: 6.25rem;
    text-align: center;
    margin-right: 0.5rem;
}

/* Keep labels centered on small screens as requested */
@media (max-width: 767.98px) {
    .inline-add-box .inline-label {
        flex: 0 0 5.5rem; /* slightly narrower on mobile */
        max-width: 5.5rem;
        text-align: center;
        margin-right: 0.5rem;
    }
}
#table-ricorrenti tbody tr.row-even {
    --bs-table-accent-bg: transparent;
    background-color: transparent;
}


/* Compact modal for dettaglio_mese pie chart: reduce width by ~30% and ensure centering */
/* We target the specific modal by ID to avoid affecting other modals. */
#uscitePieModal .modal-dialog {
    max-width: 42vw; /* further compact modal */
    width: auto;
}
#uscitePieModal .modal-content {
    border-radius: 0.5rem;
}
/* Make canvas responsive inside the modal and limit height */
#uscitePieModal canvas {
    width: 100% !important;
    height: auto !important;
    max-height: 320px; /* reduce chart height for a more compact view */
}

/* Ensure small icon button next to card titles doesn't change card height */
.card .card-body h6 {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem; /* reduced from 0.5rem to bring icon closer to text */
    white-space: nowrap; /* prevent title from breaking into multiple lines when small icon present */
    min-height: 1.75rem; /* increased slightly to accommodate 28px button */
    line-height: 1.75rem;
    max-height: 1.75rem; /* cap maximum height */
}
#togglePieBtn {
    padding: 0;
    line-height: 1 !important;
    height: 28px; /* increased from 24px per user request */
    width: 28px;
    min-width: 28px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: none; /* remove border/circle */
    background: transparent;
    flex-shrink: 0; /* prevent button from shrinking when space is tight */
    margin: 0; /* remove any inherited margins */
}
#togglePieBtn .fa-chart-pie { font-size: 0.9rem; /* increased icon size to match larger button */ }

/* Slight hover/tap affordance for the outline icon button */
#togglePieBtn:hover { transform: translateY(-1px); box-shadow: 0 1px 4px rgba(0,0,0,0.12); }

/* Normalize row height and spacing for dettaglio mese tables */
.det-mese-table th, .det-mese-table td {
    padding: .45rem .5rem; /* compact but readable */
    vertical-align: middle;
    line-height: 1.15;
}
.det-mese-table thead th { padding-top: .5rem; padding-bottom: .5rem; }
.det-mese-table tbody tr { /* enforce uniform row height across dettaglio tables */
    height: 44px; /* fixed row height to match action-button rows in ricorrenti */
}

/* Specific styling for storico table to avoid wrapped descriptions and force uniform row heights */
#table-storico {
    table-layout: fixed; /* allow column width constraints and stable row heights */
}
#table-storico td:nth-child(2) {
    max-width: 50%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Reduce vertical spacing between the budget and transactions tables */
.row.mb-3 { margin-bottom: .75rem !important; }
.mt-3 { margin-top: .75rem !important; }

/* Navigation arrows outline appearance (nav-arrow) */
.nav-arrow {
    padding: .25rem .5rem;
    border-width: 1px;
    border-style: solid;
    border-color: var(--bs-primary, #0d6efd);
    background: transparent;
    color: var(--bs-primary, #0d6efd);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: .35rem;
    transition: background-color .14s ease, transform .14s ease, color .14s ease, box-shadow .14s ease;
}
.nav-arrow i { color: inherit; }
.nav-arrow:hover, .nav-arrow:active {
    background-color: rgba(13,110,253,0.08);
    color: var(--bs-primary, #0d6efd);

/* Small utility width helpers used by inline editors and templates */
.w-140 { width: 140px !important; }
.w-200 { width: 200px !important; }
.w-120 { width: 120px !important; }
.w-100 { width: 100px !important; }

/* Utility to hide/show elements (Bootstrap has .d-none/.d-inline but added for fallback) */
.min-w-180 { min-width: 180px !important; }
.min-w-160 { min-width: 160px !important; }
.min-w-140 { min-width: 140px !important; }
.min-w-120 { min-width: 120px !important; }
.min-w-110 { min-width: 110px !important; }
.min-w-100 { min-width: 100px !important; }
.min-w-0 { min-width: 0 !important; }
.min-h-1 { min-height: 1px !important; }
.mw-350 { max-width: 350px !important; }
.z-1050 { z-index: 1050 !important; }
.lh-1-3 { line-height: 1.3 !important; }
.fs-90 { font-size: 0.9rem !important; }
.fs-75 { font-size: 0.75rem !important; }
.fs-70 { font-size: 0.7rem !important; }
.fs-65 { font-size: 0.65rem !important; }
.hidden { display: none !important; }
.inline { display: inline !important; }

/* Compact button variant used across inline editors */
.btn-compact { padding: 2px 6px !important; height: 28px !important; font-size: 13px !important; min-width: 30px !important; }

/* Small avatar helper used in passwd_manager */
.avatar-56 { width: 56px !important; height: 56px !important; }
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 4px 10px rgba(13,110,253,0.06);
}
.nav-arrow:focus {
    outline: none;
    box-shadow: 0 0 0 .18rem rgba(13,110,253, .18);
    transform: translateY(-1px);
}



